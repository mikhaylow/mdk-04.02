#include <Servo.h> // подключаем библиотеку для управления сервоприводами

Servo myservo; // создаём объект myservo для управления сервоприводом

void setup() {
  myservo.attach(3); // подключаем сервопривод к цифровому пину 3
}

uint32_t tmr; // переменная таймера (в миллисекундах, uint32_t = unsigned long)
int val = 0;  // переменная текущего угла поворота серво (0..180)
int dir = 2;  // скорость и направление изменения угла (+2 или -2 градуса за шаг)

void loop() {
  // асинхронный таймер на миллисекунды (НЕ блокирующий delay!)
  if (millis() - tmr >= 20) {         // если прошло 20мс с последнего обновления
    tmr = millis();                   // сохраняем текущее время для следующего шага
    
    val += dir;                       // изменяем угол: прибавляем скорость (+2 или -2)
    
    if (val >= 180 || val <= 0) {     // если достигли пределов (180° или 0°)
      dir = -dir;                     // меняем направление (2→-2 или -2→2)
    }
    
    myservo.write(val);               // плавно поворачиваем серво на угол val
  }
}
